<!DOCTYPE html>

<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Pyone: Python bindings for Open Nebula | Privazio</title>
<meta name="generator" content="Jekyll v3.7.0" />
<meta property="og:title" content="Pyone: Python bindings for Open Nebula" />
<meta name="author" content="Rafael del Valle" />
<meta property="og:locale" content="en" />
<meta name="description" content="An implementation of Open Nebula XML-RPC bindings in Python." />
<meta property="og:description" content="An implementation of Open Nebula XML-RPC bindings in Python." />
<meta property="og:site_name" content="Privazio" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-01-06T00:00:00+01:00" />
<script type="application/ld+json">
{"description":"An implementation of Open Nebula XML-RPC bindings in Python.","author":{"@type":"Person","name":"Rafael del Valle"},"@type":"BlogPosting","url":"/blog/2018/01/06/python-bindins-for-opennebula/","headline":"Pyone: Python bindings for Open Nebula","dateModified":"2018-01-06T00:00:00+01:00","datePublished":"2018-01-06T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/2018/01/06/python-bindins-for-opennebula/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<meta name="keywords" content="python,opennebula,api,ansible" />





<link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Privazio" />
    <link href='/assets/stylesheets/blog.css' rel="stylesheet" type="text/css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
<script>window.Modernizr || document.write('<script src="/assets/javascripts/modernizr-2.8.3.min.js"><\/script>')</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="/assets/javascripts/jquery-3.2.1.min.js"><\/script>')
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
<script>
    window.Pace || document.write('<script src="/assets/javascripts/pace.min.js"><\/script>')
</script>


    

<!-- Matomo -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(["setCookieDomain", "*.privaz.io"]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.privaz.io/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '5']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->


</head>

<body>
    <!--[if IE]>
    <p class="site-notice">You are using an outdated browser. Please <a href="http://browsehappy.com/" target="_blank">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->
<noscript>
    <p class="site-notice">This site requires JavaScript. Here are the instructions <a href="http://www.enable-javascript.com/" target="_blank">how to enable JavaScript in your web browser</a>.</p>
</noscript>

    <div class="nav-wrapper overlay-wrapper">
    <div class="nav-form overlay-form">
        <span class="overlay-header menu">Menu</span>
        <a class="btn-close">Close</a>
        <div class="results">
            <ul>
                <li><a href="/blog/categories/">Categories</a></li>
                <li><a href="/blog/tags/">Tags</a></li>
                <li><a href="/">About</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="search-wrapper overlay-wrapper">
    <div class="search-form overlay-form">
        <input type="text" class="overlay-header search-field" placeholder="Search...">
        <a class="btn-close">Close</a>
        <ul class="results"></ul>
    </div>
</div>


    <div id="page" class="hentry">
        <header class="the-header">
    <div class="unit-head">
        <div class="unit-inner unit-head-inner">
            <nav class="nav-global">
                <ul>
                    <li class="logo nav-link">
                        <button class="btn-menu" data-ga="Menu"></button>
                        <a href="/blog/">Privazio</a>
                        <!--[if !IE]> -->
                        <button class="btn-search" data-ga="Search"></button>
                        <!-- <![endif]-->
                    </li>
                    <li class="nav-link"><a data-ga="Categories" href="/blog/categories/">Categories</a></li>
                    <li class="nav-link"><a data-ga="Tags" href="/blog/tags/">Tags</a></li>
                    <!--[if !IE]> -->
                    <li class="nav-link"><a data-ga="Search" class="btn-search" href="#">Search</a></li>
                    <!-- <![endif]-->
                </ul>
            </nav>
        </div>
    </div>
</header>


        <div class="body animated fadeInDown" role="main">
            <div class="unit-body">
                <div class="unit-inner unit-body-inner">
                    <div class="entry-content">
                        <article class="unit-article layout-post">
    <div class="unit-inner unit-article-inner">
        <div itemscope itemtype="http://schema.org/Article" class="content">
            <header>
                <div class="unit-head">
                    <div class="unit-inner unit-head-inner">
                        <h1 class="entry-title" itemprop="name">Pyone: Python bindings for Open Nebula</h1>
                    </div>
                </div>
            </header>
            <div class="bd article-content">
                <div class="entry-content">
                    <div class="meta">
                        <p class="date-publish">
                            Published:
                            <time itemprop="datePublished" class="date-pub updated"
                                title="2018-01-06T00:00:00+01:00" datetime="2018-01-06T00:00:00+01:00">January 06, 2018 </time>
                            by
                            <a class="author" href="/" rel="author"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Rafael del Valle</span></span></a>
                            <a class="license-icon" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
                                    <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/theme/cc-by-sa.png"  height="16" width="80"/>
                                </a> 
                        </p>
                        <ul class="list-category list-linear">
                            <li class="list-head">Categories: </li>
                             
     
        <li>
            <a class="internal" data-ga="sdk" href="/blog/categories/#sdk" title="sdk">
            sdk <span>1</span></a>
        </li>
    



                        </ul>
                        <ul class="list-tag list-linear">
                            <li class="list-head">Tags: </li>
                             
    
        
        <li>
            <a class="internal" data-ga="ansible" href="/blog/tags/#ansible" title="ansible">ansible <span>1</span></a>
        </li>
    
        
        <li>
            <a class="internal" data-ga="api" href="/blog/tags/#api" title="api">api <span>1</span></a>
        </li>
    
        
        <li>
            <a class="internal" data-ga="opennebula" href="/blog/tags/#opennebula" title="opennebula">opennebula <span>1</span></a>
        </li>
    
        
        <li>
            <a class="internal" data-ga="python" href="/blog/tags/#python" title="python">python <span>1</span></a>
        </li>
    




                        </ul>
                    </div>
                    <div itemprop="articleBody">
                        <h1 id="heading-why-pyone">Why Pyone?</h1>

<p>After years running my own private cloud home and at my startup company, I decided
to <a href="/blog/2017/05/23/starting-privazio/" title="Starting Privazio!">start privazio</a>. Privazio is a data-center class private cloud targeting residential
users and small companies with a special focus on privacy. Privazio is currently under development.</p>

<p><a target="_blank" href="https://opennebula.org/" title="OpenNebula: Flexible Enterprise Cloud Made Simple">OpenNebula</a> is a fantastic cloud management platform that incorporates
the one key feature that <a href="/blog/2017/05/23/starting-privazio/" title="Starting Privazio!">Privazio</a> requires most: <em>simplicity</em>. <a target="_blank" href="https://opennebula.org/" title="OpenNebula: Flexible Enterprise Cloud Made Simple">OpenNebula</a>
has also a pretty reasonable entry-level hardware requirements.
<a target="_blank" href="https://opennebula.org/" title="OpenNebula: Flexible Enterprise Cloud Made Simple">OpenNebula</a> is then the ideal foundation for <a href="/blog/2017/05/23/starting-privazio/" title="Starting Privazio!">Privazio</a>.</p>

<p>It would be great to take simplicity further by providing an <a target="_blank" href="https://www.ansible.com/" title="Ansible: Simple IT Automation">Ansible</a> module to manage <a target="_blank" href="https://opennebula.org/" title="OpenNebula: Flexible Enterprise Cloud Made Simple">OpenNebula</a>. Any other functionality provided by Privazio will also be managed through Ansible
making everything fit together nicely.</p>

<p>In order to develop an <a target="_blank" href="https://www.ansible.com/" title="Ansible: Simple IT Automation">Ansible</a> module we need a robust Python API for OpenNebula.
This is not an easy task considering that OpenNebula is constantly being improved and its interfaces
are likely to evolve.</p>

<h1 id="heading-introducing-pyone">Introducing Pyone</h1>

<p>Pyone is a Python API for OpenNebula developed with two key goals in mind: Maintainability and Completeness.</p>

<p>OpenNebula provides a robust XML-RPC API for which XML Schema Definition (XSD) files are distributed.</p>

<p>Pyone uses the Schema Definition files to auto-generate the Python Bydings with <a href="http://pyxb.sourceforge.net/" title="PyXB: Python XML Schema Bindings¶">PyXB</a>.</p>

<p>On the other hand, OpenNebula's XML-RPC API is consistent in the way in which calls are made, data is returned and errors are triggered. This allows for Pyone to subclass Python's xmlrpc.ServerProxy class implementing all OpenNebula peculiarities
in one go: authentication, error conditions, special data types, etc.</p>

<p>By auto-generating the bindings and subclassing the proxy object maintainability
and completeness should be achieved. In theory future OpenNebula releases would only require updating the XSD files and
regenerating the bindings.</p>

<p>Furthermore, making client calls and navigating the results match 100% the provided Open Nebula XML-RPC
documentation.</p>

<p>Client code created with Pyone looks like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">import</span> <span class="nn">pyone</span>

<span class="n">one</span> <span class="o">=</span> <span class="n">pyone</span><span class="o">.</span><span class="n">OneServer</span><span class="p">(</span><span class="s">"http://one/RPC2"</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="s">"oneadmin:onepass"</span> <span class="p">)</span>
<span class="n">hostpool</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">hostpool</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
<span class="n">host</span> <span class="o">=</span> <span class="n">hostpool</span><span class="o">.</span><span class="n">HOST</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">id</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">ID</span>

<span class="n">one</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="s">'TEMPLATE'</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">'NAME'</span><span class="p">:</span> <span class="s">'abc'</span><span class="p">,</span>
      <span class="s">'MEMORY'</span><span class="p">:</span> <span class="s">'1024'</span><span class="p">,</span>
      <span class="s">'ATT1'</span><span class="p">:</span> <span class="s">'value1'</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="mi">1</span><span class="p">)</span>

</code></pre></div></div>

<p>Checkout <a target="_blank" href="https://github.com/privazio/pyone" title="Open Nebula XML-RPC Python Bindings">Pyone in Github!</a></p>


                    </div>
                </div>
            </div>
            <footer class="unit-foot">
                <div class="unit-inner unit-foot-inner">
                    <div class="gotop">
                        <a class="internal" href="#page">Back to Top</a>
                        
                    </div>
                    <nav class="pagination">
                        
                            <a class="internal" data-ga="Previous Post" rel="prev" href="/blog/2017/07/26/handlebars-for-apine/" title="View 'New package: Native Handlebars for Alpine Linux'"> ← New package: Native Handlebars for Alpine Linux</a>
                        
                        
                    </nav>
                </div>
            </footer>
            <div class="misc-content">
                
            </div>
        </div>
    </div>
</article>

                    </div>
                </div>
            </div>
        </div>
        <footer class="the-footer">
    <div class="unit-foot">
        <div class="unit-inner unit-foot-inner">
            <div class="misc vcard">
                <div class="about">
                    <h4><a href="/">About</a></h4>
                    
                        <p>Privazio is an OpenSource data-center class private cloud, sponsored by Valletech AB.</p>
                    
                    
                </div>
                <div class="social-links">
                    
                        <a class="external ico-gmail" href="mailto:rvalle@privaz.io" rel="me" target="_blank" title="email"></a>
                    
                    <a class="external ico-rss" href="/feed.xml" rel="me" target="_blank" title="feed"></a>
                    
                        
                    
                        
                            <a class="external ico-github" href="https://github.com/privazio" rel="me" target="_blank" title="github"></a>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            <a class="external ico-twitter" href="https://twitter.com/privaz_io" rel="me" target="_blank" title="twitter"></a>
                        
                    
                        
                    
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="internal back-to-top">Back to Top</a>
</footer>

    </div>

    <script>
$(document).ready(function () {
    var offset = 50,
        duration = 500,
        width = 960;
    $(window).scroll(function () {
        if ($(window).width() > width) {
            if ($(this).scrollTop() > offset) {
                $('footer').css('top', '20px');
                $('footer .back-to-top').fadeIn(duration);
            } else {
                $('footer').css('top', 'auto');
                $('footer .back-to-top').fadeOut(duration);
            }
        }
    });
    $(window).resize(function () {
        if ($(window).width() < width) {
            $('footer').css('top', 'auto');
            $('footer .back-to-top').fadeOut(duration);
        }
        if ($(window).width() >= width && $(this).scrollTop() > offset) {
            $('footer').css('top', '20px');
            $('footer .back-to-top').fadeIn(duration);
        }
    });

    $('footer .back-to-top, .gotop a').on('click', function (event) {
        event.preventDefault();
        $('html, body').animate({
            scrollTop: 0
        }, duration);
        return false;
    });

    $('.show-hidden').on('click', function () {
        $(this).parent().next().toggleClass("hidden");
        $(this).toggleClass("hidden");
    });
});
</script>

<!-- Google Analytics Event tracking -->

<script>
$(document).ready(function () {
    function sendGaEvent(category, action, label) {
        if (typeof label === 'undefined') {
            ga('send', {
                hitType: 'event',
                eventCategory: category,
                eventAction: action
            });
        } else {
            ga('send', {
                hitType: 'event',
                eventCategory: category,
                eventAction: action,
                eventLabel: label.trim()
            });
        };
    };

    function handleOutboundLinkClicks(href) {
        ga('send', 'event', {
            eventCategory: 'Outbound Link',
            eventAction: 'Click',
            eventLabel: href.trim(),
            transport: 'beacon'
        });
    }

    $('.external').on('click', function () {
        handleOutboundLinkClicks($(this).attr('href'));
    });

    $('.the-header .nav-link a, [class$=wrapper] .results a').on('click', function () {
        sendGaEvent('Blog', 'Navigate', this.textContent);
    });
    $('.the-header .nav-link button').on('click', function () {
        sendGaEvent('Blog', 'Navigate', this.getAttribute('data-ga'));
    });
    $('.the-footer .about h4 a').on('click', function () {
        sendGaEvent('Blog', 'Go to About');
    });
    $('.tag_box.categories a').on('click', function () {
        sendGaEvent('Blog', 'Click Category', this.title);
    });
    $('.tag_box.tags a').on('click', function () {
        sendGaEvent('Blog', 'Click Tag', this.title);
    });
    $('.unit-article .comments .show-hidden').on('click', function () {
        sendGaEvent('Post', 'Show Comments', this.textContent);
    });
    $('a.internal').on('click', function () {
        label = (this.getAttribute('data-ga') !== null)
            ? this.getAttribute('data-ga')
            : this.textContent;
        sendGaEvent('Post', 'Navigate', label);
    });
    $('.unit-article .meta .author').on('click', function () {
        sendGaEvent('Post', 'Show Author');
    });
    $('.unit-article .meta .license').on('click', function () {
        sendGaEvent('Post', 'Show License');
    });
    $('.unit-article .meta .list-tag a').on('click', function () {
        if (this.getAttribute('data-ga') !== null) {
            sendGaEvent('Post', 'Click Tag', this.getAttribute('data-ga'));
        }
    });
    $('.unit-article .meta .list-category a').on('click', function () {
        if (this.getAttribute('data-ga') !== null) {
            sendGaEvent('Post', 'Click Category', this.getAttribute('data-ga'));
        }
    });
    $('.addthis_toolbox .btn-share-post').on('click', function () {
        sendGaEvent('Post', 'Share Post', this.attr('title'));
    });
});
</script>


<!-- Show menu overlay + Jekyll Simple Search option -->
<script src="/assets/javascripts/jekyll-search.jquery.js"></script>
<script>
$(document).ready(function () {
    $('.search-field').simpleJekyllSearch({
      jsonFile: '/search.json',
      template: '<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',
      searchResults: '.search-wrapper .results',
      searchResultsTitle: '<h4>Search results</h4>',
      noResults: '<p>Oh shucks<br/><small>Nothing found :(</small></p>'
    });
});

(function ($, window, undefined) {
    var closeOverlay = function () {
        $('.nav-wrapper, .search-wrapper').removeAttr('style');
        $(".nav-form, .search-form").removeClass('active');
        $("body").removeClass('nav-overlay search-overlay');
    };

    $('.nav-global .btn-search').on('click', function () {
        $('.search-wrapper').css({display: "block"});
        $(".search-form").addClass('active');
        $(".search-form").find('input').focus();
        $("body").addClass('search-overlay');
    });

    $('.nav-global .btn-menu').on('click', function () {
        $('.nav-wrapper').css({display: "block"});
        $(".nav-form").addClass('active');
        $(".nav-form .search-field").prop('disabled', true);
        $("body").addClass('nav-overlay');
    });

    $('.nav-wrapper .btn-close, .search-wrapper .btn-close').on('click', function () {
        closeOverlay();
    });

    $(document).on('keyup', function (e) {
        if (e.keyCode === 27) {
            closeOverlay();
        }
    });
})(jQuery, window);
</script>

<script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.min.js'></script>
<script src="/assets/javascripts/unveil/jquery.unveil.min.js"></script>

<script>
    window.jQuery.fancybox || document.write('<script src="/assets/javascripts/fancybox/jquery.fancybox.pack.js?v=2.1.4"><\/script>')
    window.jQuery.fancybox.helpers.buttons || document.write('<script src="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"><\/script>')
</script>

<script>
    $("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');
    $("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');
    $(".post-image").fancybox({
        prevEffect: 'none',
        nextEffect: 'none',
        closeBtn: true,
        helpers: {
            title: {
                type: 'float'
            }
        }
    });
    $(document).ready(function () {
        $(".post-image > img").unveil(450);
    });
</script>

</body>

</html>